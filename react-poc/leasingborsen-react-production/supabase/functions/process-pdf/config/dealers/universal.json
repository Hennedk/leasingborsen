{
  "id": "universal",
  "name": "Universal Cross-Dealer Configuration",
  "version": "v1.0",
  "description": "Universal configuration with cross-dealer validation for all dealer types",
  
  "extraction": {
    "patterns": {
      "modelHeader": [
        {
          "pattern": "^\\s*([A-Z][A-Za-z0-9\\s\\.\\-]+)\\s*(?:leasingpriser|prisliste|leasing)",
          "flags": "i",
          "description": "Model header with leasing keywords",
          "examples": ["ID.4 leasingpriser", "Golf Prisliste"]
        },
        {
          "pattern": "^\\s*([A-Z][A-Za-z0-9\\s\\.\\-]+)\\s*$",
          "flags": "",
          "description": "Standalone model header",
          "examples": ["ID.4", "Corolla", "GLC"]
        }
      ],
      "modelVariantLine": [
        {
          "pattern": "([A-Za-z0-9\\s\\.\\-]+)\\s+(\\d+)\\s*(?:HP|hk|kW|PS)",
          "flags": "i",
          "description": "Variant with power specification",
          "examples": ["Pro 150 HP", "GTI 245 PS"]
        }
      ],
      "variantLine": [
        {
          "pattern": "^\\s*([A-Za-z0-9\\s\\-\\.]+)(?:\\s+(\\d+)\\s*(?:HP|hk|kW|PS))?",
          "flags": "i",
          "description": "Variant line with optional power",
          "examples": ["Pro", "GTI 245 HP"]
        }
      ],
      "powerSpec": [
        {
          "pattern": "(\\d+)\\s*(?:HP|hk|PS|ch|bhp)",
          "flags": "i",
          "description": "Horsepower specification",
          "examples": ["150 HP", "110 kW"]
        },
        {
          "pattern": "(\\d+)\\s*kW",
          "flags": "i",
          "description": "Kilowatt specification",
          "examples": ["110 kW"]
        }
      ],
      "co2Specs": [
        {
          "pattern": "(\\d+)\\s*g/km.*?(\\d+[,.]?\\d*)\\s*(?:l/100|L/100).*?(\\d+)\\s*kr",
          "flags": "i",
          "description": "CO2, fuel consumption, and tax",
          "examples": ["120 g/km, 5.2 L/100 km, 1500 kr"]
        }
      ],
      "electricSpecs": [
        {
          "pattern": "(\\d+)\\s*km.*?(\\d+[,.]?\\d*)\\s*kWh/100",
          "flags": "i",
          "description": "Electric range and consumption",
          "examples": ["400 km, 18.5 kWh/100 km"]
        }
      ],
      "transmissionSpec": [
        {
          "pattern": "(?:Automatisk|Manual|DSG|CVT|Tiptronic)",
          "flags": "i",
          "description": "Transmission types",
          "examples": ["Automatisk", "Manual", "DSG"]
        }
      ],
      "pricingLine": [
        {
          "pattern": "(\\d{1,2}\\.\\d{3})\\s*km.*?(\\d{2})\\s*mdr.*?(\\d{1,3}\\.\\d{3}).*?(\\d{1,3}\\.\\d{3}).*?(\\d{1,3}\\.\\d{3})",
          "flags": "",
          "description": "Full pricing line with mileage, term, costs",
          "examples": ["15.000 km, 36 mdr, 450.000 kr, 15.000 kr, 12.500 kr"]
        },
        {
          "pattern": "(\\d{1,2}\\.\\d{3})\\s*km.*?(\\d{2})\\s*mdr.*?(\\d{1,3}\\.\\d{3}).*?(\\d{1,3}\\.\\d{3})",
          "flags": "",
          "description": "Alternative pricing format",
          "examples": ["20.000 km, 48 mdr, 500.000 kr, 10.500 kr"]
        }
      ],
      "pricingLineAlt": [
        {
          "pattern": "(\\d+)\\s*km.*?(\\d+)\\s*måneder.*?(\\d+)\\s*kr",
          "flags": "i",
          "description": "Simple pricing pattern",
          "examples": ["15000 km, 36 måneder, 12500 kr"]
        }
      ],
      "tableHeader": [
        {
          "pattern": "Årskørsel.*?Løbetid.*?Total.*?Etablering.*?Månedlig",
          "flags": "i",
          "description": "Standard table headers",
          "examples": ["Årskørsel | Løbetid | Total leasing | Etablering | Månedlig ydelse"]
        }
      ],
      "sectionBreak": [
        {
          "pattern": "={3,}|_{3,}|-{3,}",
          "flags": "",
          "description": "Section dividers",
          "examples": ["===", "---", "___"]
        }
      ]
    },
    
    "aiPrompt": {
      "systemRole": "You are an expert automotive data extraction specialist with deep knowledge of car specifications across all brands and dealers. You extract and standardize vehicle leasing information with high accuracy, ensuring consistency across different dealer formats.",
      "userPromptTemplate": "Extract vehicle leasing data from this text. Focus on:\n\n1. VEHICLE IDENTIFICATION:\n   - Exact model names (normalize variations like ID.4/ID 4/ID4)\n   - Variant/trim levels\n   - Power specifications (HP and kW)\n   - Fuel type (Gasoline/Diesel/Electric/Hybrid)\n   - Body type (SUV/Sedan/Hatchback/etc.)\n\n2. TECHNICAL SPECIFICATIONS:\n   - Engine power (convert between HP/kW if needed)\n   - CO2 emissions (g/km)\n   - Fuel consumption (L/100km or km/L)\n   - Electric range (km) and consumption (kWh/100km)\n   - Transmission type\n\n3. PRICING INFORMATION:\n   - Annual mileage options\n   - Lease term (months)\n   - Monthly lease price\n   - Down payment/establishment fee\n   - Total lease cost\n\n4. STANDARDIZATION:\n   - Use consistent model names across dealers\n   - Standardize body types and fuel types\n   - Convert units to standard format\n   - Validate against automotive industry ranges\n\nText to extract from:\n{text}\n\nReturn data in structured JSON format with standardized naming.",
      "examples": [
        {
          "input": "ID.4 Pro 150 HP Electric SUV\n15.000 km, 36 mdr, 12.500 kr/md",
          "output": {
            "model": "ID.4",
            "variant": "Pro",
            "horsepower": 150,
            "fuelType": "Electric",
            "bodyType": "SUV",
            "pricingOptions": [
              {
                "mileagePerYear": 15000,
                "periodMonths": 36,
                "monthlyPrice": 12500
              }
            ]
          },
          "description": "Electric vehicle with standardized naming"
        }
      ],
      "temperature": 0.1,
      "maxTokens": 4000,
      "model": "gpt-4"
    },
    
    "confidence": {
      "usePatternOnly": 0.85,
      "requireReview": 0.6,
      "minimumAcceptable": 0.4,
      "cacheResults": 0.7
    },
    
    "fieldMappings": [
      {
        "sourceField": "model",
        "targetField": "model",
        "transformation": "trim",
        "required": true
      },
      {
        "sourceField": "variant",
        "targetField": "variant",
        "transformation": "trim",
        "required": true
      },
      {
        "sourceField": "horsepower",
        "targetField": "horsepower",
        "transformation": "parseNumber",
        "required": false
      },
      {
        "sourceField": "fuelType",
        "targetField": "fuel_type",
        "transformation": "trim",
        "required": false
      },
      {
        "sourceField": "bodyType",
        "targetField": "body_type",
        "transformation": "trim",
        "required": false
      },
      {
        "sourceField": "transmission",
        "targetField": "transmission",
        "transformation": "trim",
        "required": false
      },
      {
        "sourceField": "co2Emission",
        "targetField": "co2_emission",
        "transformation": "parseNumber",
        "required": false
      },
      {
        "sourceField": "isElectric",
        "targetField": "is_electric",
        "transformation": "parseBoolean",
        "defaultValue": false,
        "required": false
      }
    ]
  },
  
  "validation": {
    "priceRange": {
      "min": 1000,
      "max": 50000
    },
    "requiredFields": ["model", "variant", "pricingOptions"],
    "modelWhitelist": [],
    "modelBlacklist": ["test", "example", "demo"],
    "maxItemsPerPDF": 50,
    "minItemsPerPDF": 1
  },
  
  "optimization": {
    "cacheEnabled": true,
    "learningEnabled": true,
    "maxAICostPerPDF": 2.0,
    "patternLearningThreshold": 0.8,
    "cacheExpiryHours": 24
  },
  
  "metadata": {
    "createdAt": "2024-01-15T10:00:00Z",
    "updatedAt": "2024-01-15T10:00:00Z",
    "createdBy": "system",
    "isActive": true,
    "notes": "Universal configuration with cross-dealer validation capabilities. Handles standardization across all dealer formats with intelligent model name mapping and unit conversions."
  }
}